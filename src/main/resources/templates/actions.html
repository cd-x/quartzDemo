<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>actions</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<style>
    button{
        margin-left: 10px;
        margin-bottom: 20px;
    }
    .header{
        align-items: center;
        margin-bottom: 20px;
        margin-top: 10px;
        margin-left: auto;
    }
    span{
        margin-bottom: auto;
        align-items: baseline;
    }
    p{
      display: inline-block;
        font-weight: bold;
        font-size: large;
    }

</style>

<body>
<script type="text/javascript" th:src="@{/js/script.js}"></script>
    <div class="header">
        <h3 align="center">Job Actions</h3>
    </div>

    <div align="center" class="container">
        <div class="row">
            <form  th:each="job : ${jobList}"  th:action="@{/action/__${job.getJobName()}__}" method=post>
                <span>
                    <p th:text="${job.getJobName()}"></p>
                    <button type="button" class="btn btn-info btn-md" data-toggle="modal" data-target="#myModal">Update</button>
                    <button type="submit" th:name="action" th:value="pause" class="btn btn-warning">Pause</button>
                    <button type="submit" th:name="action" th:value="resume" class="btn btn-success">Resume</button>
                    <button type="submit" th:name="action" th:value="delete" class="btn btn-danger">Delete</button>
                </span>


                <!-- Modal -->
                <div class="modal fade" id="myModal" role="dialog">
                    <div class="modal-dialog">

                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title" th:text="${job.getJobName()}"></h4>
                            </div>
                            <div class="modal-body">
                                <form th:action="@{/action/__${job.getJobName()}__}" th:object="${timer}" method=post>

                                    <div id="startDate" class="form-group row">
                                        <label for="start" class="col-sm-4 col-form-label">Start Date</label>
                                        <div class="col-sm-8">
                                            <input class="form-control" type="datetime-local"
                                                   th:field="*{startDate}" id="start">
                                        </div>
                                    </div>
                                    <div id="cronJob" class="form-group row">
                                        <label for="cron" class="col-sm-4 col-form-label">Cron Job</label>
                                        <div class="form-check col-sm-8">
                                            <input class="form-check-input" type="checkbox"
                                                   onclick="switchJobType()" th:field="*{cronJob}"
                                                   id="cron">
                                        </div>
                                    </div>
                                    <div id="endDate" class="form-group row">
                                        <label for="end" class="col-sm-4 col-form-label">End Date</label>
                                        <div class="col-sm-8">
                                            <input class="form-control" type="datetime-local"
                                                   th:field="*{endDate}" id="end">
                                        </div>
                                    </div>
                                    <div id="repeatInterval" class="form-group row">
                                        <label for="repeat" class="col-sm-4 col-form-label">Trigger Interval</label>
                                        <div class="col-sm-8">
                                            <input  class="form-control" type="number"
                                                   th:field ="*{repeatInterval}" id="repeat">
                                        </div>
                                    </div>
                                    <div id="runForever" class="form-group row">
                                        <label for="run" class="col-sm-4 col-form-label">Run Forever</label>
                                        <div class="form-check col-sm-8">
                                            <input class="form-check-input" type="checkbox"
                                                   th:field="*{runForever}" id="run">
                                        </div>
                                    </div>
                                    <div id="totalFireCount" class="form-group row">
                                        <label for="totalFire" class="col-sm-4 col-form-label">Trigger Count</label>
                                        <div class="col-sm-8">
                                            <input  class="form-control" type="number"
                                                   th:field ="*{totalFireCount}" id="totalFire">
                                        </div>
                                    </div>
                                    <div id="cronExpression" class="form-group row">
                                        <label for="cron-text" class="col-sm-4 col-form-label">Cron Expression</label>
                                        <div class="col-sm-8">
                                            <input  class="form-control" type="number"
                                                   th:field ="*{cronExpression}" id="cron-text">
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-primary">Save changes</button>
                            </div>
                        </div>

                    </div>
                </div>


            </form>
        </div>
    </div>
</body>
</html>